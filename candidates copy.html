<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philippine Senatorial Candidates 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dark background */
            color: #f3f4f6; /* Light text */
        }
        .candidate-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden; /* Ensures image corners are rounded with the card */
            position: relative; /* Required for absolute positioning of the hover button */
        }
        .candidate-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 0 0 2px #4f46e5; /* Indigo focus ring on hover */
        }
        .candidate-card.selected {
            box-shadow: 0 0 0 3px #3b82f6; /* Blue ring for selected */
        }
        .modal {
            background-color: rgba(0, 0, 0, 0.75); /* Darker overlay for modal */
        }
        .modal-content {
            background-color: #1f2937; /* Darker modal content bg */
            color: #d1d5db; /* Lighter text for modal content */
            max-height: 90vh;
            overflow-y: auto;
        }
        .tab-button {
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .tab-button.active {
            background-color: #4f46e5; /* Indigo */
            color: white;
        }
        .tab-button:not(.active):hover {
            background-color: #374151; /* Gray-700 for hover on inactive tabs */
        }
        .action-button {
            transition: background-color 0.2s ease;
        }
        .action-button:hover {
            opacity: 0.9;
        }
        .search-input {
            background-color: #374151; /* Gray-700 */
            border-color: #4b5563; /* Gray-600 */
            color: #f3f4f6; /* Light text */
        }
        .search-input::placeholder {
            color: #9ca3af; /* Gray-400 */
        }
        /* Custom scrollbar for modal content (optional) */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }
        .modal-content::-webkit-scrollbar-track {
            background: #374151; /* Gray-700 */
            border-radius: 10px;
        }
        .modal-content::-webkit-scrollbar-thumb {
            background: #4f46e5; /* Indigo */
            border-radius: 10px;
        }
        .modal-content::-webkit-scrollbar-thumb:hover {
            background: #6366f1; /* Lighter Indigo */
        }
        .section-title {
            border-bottom: 1px solid #4b5563; /* Gray-600 */
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: #9ca3af; /* Gray-400 */
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .detail-item {
            margin-bottom: 0.75rem;
        }
        .detail-item strong {
            color: #e5e7eb; /* Gray-200 */
        }
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            font-size: 0.875rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000; /* Ensure it's above other content */
            transition: opacity 0.3s ease, transform 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
        }
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        .notification.error {
            background-color: #ef4444; /* Red-500 */
        }
         .notification.success {
            background-color: #22c55e; /* Green-500 */
        }
    </style>
</head>
<body class="min-h-screen">

    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-500 to-red-500">Philippine Senatorial Candidates</h1>
            <p class="text-lg text-gray-400 mt-2">May 2025 National Elections</p>
            <p class="text-sm text-gray-500 mt-1">Click on a candidate to view details. You can select up to 12 preferred senators.</p>
        </header>

        <div class="mb-8 flex flex-col sm:flex-row justify-between items-center gap-4">
            <div class="flex space-x-2 border border-gray-700 rounded-lg p-1 bg-gray-800">
                <button id="allCandidatesTab" class="tab-button active px-4 py-2 rounded-md text-sm font-medium">All Candidates</button>
                <button id="mySenatorsTab" class="tab-button px-4 py-2 rounded-md text-sm font-medium">My Senators (<span id="selectedCount">0</span>/12)</button>
            </div>
            <div class="relative w-full sm:w-auto">
                <input type="text" id="searchInput" placeholder="Search candidates..." class="search-input w-full sm:w-64 pl-10 pr-4 py-2 rounded-lg border focus:ring-indigo-500 focus:border-indigo-500">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                    </svg>
                </div>
            </div>
        </div>

        <div id="candidateGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
            </div>
        <p id="noResultsMessage" class="text-center text-gray-400 mt-10 text-xl hidden">No candidates found.</p>
        <p id="noSelectionsMessage" class="text-center text-gray-400 mt-10 text-xl hidden">You have not selected any preferred senators yet.</p>

    </div>

    <div id="candidateModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal hidden">
        <div class="modal-content w-full max-w-3xl rounded-lg shadow-xl p-6 md:p-8">
            <div class="flex justify-between items-start mb-6">
                <h2 id="modalCandidateNameTitle" class="text-3xl font-bold text-white">Candidate Name</h2>
                <button id="closeModalButton" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>

            <div class="md:flex md:space-x-6">
                <div class="md:w-1/3 text-center md:text-left mb-6 md:mb-0">
                    <img id="modalCandidatePhoto" src="" alt="Candidate Photo" class="w-48 h-48 object-cover rounded-lg mx-auto md:mx-0 mb-4 border-2 border-gray-600">
                    <h3 id="modalCandidateName" class="text-2xl font-semibold text-white"></h3>
                    <p id="modalCandidateParty" class="text-indigo-400"></p>
                    <button id="modalSelectButton" class="w-full action-button text-white font-semibold py-3 px-4 rounded-lg mt-4">
                        Add to My Senators
                    </button>
                </div>

                <div class="md:w-2/3">
                    <div class="mb-6">
                        <h4 class="section-title">Biography</h4>
                        <p id="modalShortBio" class="text-sm"></p>
                    </div>

                    <div class="mb-6">
                        <h4 class="section-title">Educational Background</h4>
                        <ul id="modalEducation" class="list-disc list-inside text-sm space-y-1"></ul>
                    </div>

                    <div class="mb-6">
                        <h4 class="section-title">Work Background</h4>
                        <ul id="modalWorkBackground" class="list-disc list-inside text-sm space-y-1"></ul>
                    </div>

                    <div class="mb-6">
                        <h4 class="section-title">Laws Passed / Authored / Co-Authored</h4>
                        <ul id="modalLawsAuthored" class="list-disc list-inside text-sm space-y-1"></ul>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="section-title">Key Contributions</h4>
                        <ul id="modalContributions" class="list-disc list-inside text-sm space-y-1"></ul>
                    </div>

                    <div class="mb-6">
                        <h4 class="section-title">Issues / Violations Related</h4>
                        <ul id="modalIssuesOrViolations" class="list-disc list-inside text-sm space-y-1"></ul>
                    </div>
                    
                    <div class="mb-6" id="modalOtherKeyAspectsContainer">
                        <h4 class="section-title">Other Key Aspects</h4>
                        <p id="modalOtherKeyAspects" class="text-sm"></p>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // Candidate Data (Embed for simplicity, ideally from a JSON file)
        const candidatesData = [
  {
    "id": 1,
    "name": "Erwin Tulfo",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Erwin+Tulfo",
    "party": "ACT-CIS Partylist (running as independent or under an alliance for Senate)",
    "shortBio": "A prominent former broadcast journalist and television personality known for his public service programs. Currently serving as a Party-list Representative.",
    "education": [
      {"degree": "Bachelor's Degree in Journalism", "school": "Unspecified", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Party-list Representative", "company": "ACT-CIS Partylist", "period": "2023-Present"},
      {"position": "Television/Radio Broadcaster", "company": "Various Media Networks", "period": "Decades of Service"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A (as Party-list Representative, focus is often on specific sector advocacy)", "description": "Information on specific laws primarily authored as a Party-list Representative for inclusion in a Senate bid is not always readily available in summary. Focus has been on advocating for marginalized sectors.", "status": "N/A"}
    ],
    "contributions": [
      "Known for providing direct public assistance through his media programs.",
      "Advocacy for the welfare of OFWs and the poor.",
      "Highlighting government inefficiency and corruption through investigative journalism."
    ],
    "issuesOrViolations": [
      {"case": "Contempt of the House of Representatives (2022)", "status": "Resolved", "details": "Cited for contempt over remarks made against a congressman. Later apologized."}
    ],
    "otherKeyAspects": "Topped recent senatorial preference surveys. Brother of incumbent Senator Raffy Tulfo and potential candidate Ben Tulfo, suggesting a strong political brand."
  },
  {
    "id": 2,
    "name": "Bong Go",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Bong+Go",
    "party": "PDP",
    "shortBio": "Incumbent Senator of the Philippines. Former Special Assistant to the President under the Duterte administration.",
    "education": [
      {"degree": "Bachelor of Science in Marketing and Corporate Communications", "school": "De La Salle University", "year": "1998"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2019-Present"},
      {"position": "Special Assistant to the President", "company": "Office of the President", "period": "2016-2018"}
    ],
    "lawsAuthored": [
      {"lawName": "Malasakit Centers Act (RA 11463)", "description": "Institutionalized Malasakit Centers in all DOH-run hospitals and in the Philippine General Hospital.", "status": "Passed"},
      {"lawName": "Department of Human Settlements and Urban Development Act (RA 11201)", "description": "Created the Department of Human Settlements and Urban Development.", "status": "Passed"},
      {"lawName": "Mandatory Establishment of Evacuation Centers Act (RA 11502)", "description": "Mandates the establishment of safe, permanent, and fully equipped evacuation centers in every city and municipality.", "status": "Passed"}
    ],
    "contributions": [
      "Principal author of key legislation related to healthcare and housing.",
      "Initiated and supported the establishment of Malasakit Centers nationwide.",
      "Advocates for sports development and youth welfare."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Closely associated with former President Rodrigo Duterte. Focuses on healthcare, social services, and infrastructure."
  },
  {
    "id": 3,
    "name": "Pia Cayetano",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Pia+Cayetano",
    "party": "Nacionalista Party",
    "shortBio": "Incumbent Senator of the Philippines. A lawyer and advocate for health, education, and women's rights. Has served multiple terms in the Senate.",
    "education": [
      {"degree": "Bachelor of Arts in Economics", "school": "University of the Philippines, Diliman", "year": "1985"},
      {"degree": "Juris Doctor", "school": "Ateneo de Manila University", "year": "1991"},
      {"degree": "Master of Law (LL.M.)", "school": "New York University", "year": "1997"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2004-2016, 2019-Present"},
      {"position": "Representative", "company": "Taguig City (Lone District)", "period": "2016-2019"}
    ],
    "lawsAuthored": [
      {"lawName": "Expanded Senior Citizens Act (RA 9994)", "description": "Granted additional benefits and privileges to senior citizens.", "status": "Passed"},
      {"lawName": "Magna Carta of Women (RA 9710)", "description": "A comprehensive law that seeks to eliminate discrimination against women.", "status": "Passed"},
      {"lawName": "Responsible Parenthood and Reproductive Health Act (RA 10354)", "description": "Mandates the state to provide access to family planning and reproductive health services.", "status": "Passed"}
    ],
    "contributions": [
      "Authored and sponsored landmark legislation on health, women's rights, and education.",
      "Advocates for environmental protection and sustainable development.",
      "Supports sports and fitness programs."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Comes from a prominent political family. Known for her legislative work and advocacy."
  },
    {
    "id": 4,
    "name": "Lito Lapid",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Lito+Lapid",
    "party": "NPC",
    "shortBio": "Incumbent Senator and former movie actor and governor of Pampanga. Known for his action film roles.",
    "education": [
      {"degree": "Unspecified", "school": "Unspecified", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2004-2016, 2019-Present"},
      {"position": "Governor", "company": "Pampanga Province", "period": "1995-2004"}
    ],
    "lawsAuthored": [
      {"lawName": "Free commuter train rides for students (RA 11315)", "description": "Mandated free train rides for students on MRT and LRT.", "status": "Passed"},
      {"lawName": "Anti-Agricultural Smuggling Act (RA 10845)", "description": "Declared large-scale agricultural smuggling as economic sabotage.", "status": "Co-authored, Passed"}
    ],
    "contributions": [
      "Focused on legislation providing benefits and assistance to students and farmers.",
      "Advocated for the welfare of the poor and marginalized.",
      "Used his popularity as an actor to connect with constituents."
    ],
    "issuesOrViolations": [
        {"case": "Graft charges related to fertilizer scam (filed by Ombudsman)", "status": "Acquitted", "details": "Faced charges related to the alleged misuse of fertilizer funds during his term as governor. He was acquitted by the Sandiganbayan."}
        ],
    "otherKeyAspects": "Popular figure due to his acting career. Focuses on populist legislation."
  },
    {
    "id": 5,
    "name": "Imee Marcos",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Imee+Marcos",
    "party": "Nacionalista Party",
    "shortBio": "Incumbent Senator and daughter of former President Ferdinand E. Marcos. Has served as governor and representative of Ilocos Norte.",
    "education": [
      {"degree": "Bachelor of Arts in Oriental Studies", "school": "Princeton University (claimed, subject of controversy)", "year": "Unspecified"},
      {"degree": "College of Law", "school": "University of the Philippines (attended)", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2019-Present"},
      {"position": "Governor", "company": "Ilocos Norte Province", "period": "2010-2019"},
      {"position": "Representative", "company": "Ilocos Norte (2nd District)", "period": "1998-2007"}
    ],
    "lawsAuthored": [
      {"lawName": "Youth Entrepreneurship Act (RA 10679)", "description": "Promotes youth entrepreneurship and financial literacy.", "status": "Passed (as Representative)"},
       {"lawName": "Magna Carta of the Poor (RA 11291)", "description": "Institutionalized the framework for the integrated strategy for poverty alleviation.", "status": "Co-authored, Passed"}
    ],
    "contributions": [
      "Advocated for youth empowerment and entrepreneurship.",
      "Supported programs for agriculture and tourism in Ilocos Norte.",
      "Involved in various legislative inquiries and oversight functions in the Senate."
    ],
    "issuesOrViolations": [
        {"case": "Questionable educational attainment claims", "status": "Controversial", "details": "Her claims regarding degrees from prestigious universities have been disputed."}
    ],
    "otherKeyAspects": "Part of a prominent political dynasty. Chairs key committees in the Senate. Vocal on various national issues."
  },
   {
    "id": 6,
    "name": "Ronald dela Rosa",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Bato+dela+Rosa",
    "party": "PDP",
    "shortBio": "Incumbent Senator and former Philippine National Police (PNP) Chief under President Duterte. Known for his role in the 'war on drugs'.",
    "education": [
      {"degree": "Bachelor of Science", "school": "Philippine Military Academy (PMA)", "year": "1986"},
       {"degree": "Master in Public Administration", "school": "University of Southeastern Philippines", "year": "Unspecified"},
       {"degree": "Doctor of Philosophy in Development Administration", "school": "University of Southeastern Philippines", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2019-Present"},
      {"position": "Director General", "company": "Philippine National Police (PNP)", "period": "2016-2018"},
       {"position": "Director General", "company": "Bureau of Corrections (BuCor)", "period": "2018"}
    ],
    "lawsAuthored": [
      {"lawName": "Philippine National Police Modernization Act (RA 11571)", "description": "Provides for the modernization and strengthening of the Philippine National Police.", "status": "Co-authored, Passed"},
      {"lawName": "GMRC and Values Education Act (RA 11476)", "description": "Mandates the inclusion of Good Manners and Right Conduct and Values Education in the K to 12 curriculum.", "status": "Co-authored, Passed"}
    ],
    "contributions": [
      "Led the implementation of the government's anti-drug campaign as PNP Chief.",
      "Authored and co-authored legislation related to law enforcement and education.",
      "Advocates for peace and order and national security."
    ],
    "issuesOrViolations": [
        {"case": "Involvement in the 'war on drugs'", "status": "Subject of investigation by the International Criminal Court (ICC)", "details": "His role in the anti-drug campaign has led to accusations of human rights violations, which he denies."}
        ],
    "otherKeyAspects": "Strong support base due to his background as PNP Chief and association with Duterte. Focuses on law and order."
  },
  {
    "id": 7,
    "name": "Bam Aquino",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Bam+Aquino",
    "party": "KANP (Katipunan ng Nagkakaisang Pilipino)",
    "shortBio": "Former Senator known for his legislative work on youth, entrepreneurship, and education. A cousin of former President Benigno Aquino III.",
    "education": [
      {"degree": "Bachelor of Science in Management Engineering", "school": "Ateneo de Manila University", "year": "1999"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2013-2019"},
      {"position": "Director General", "company": "Technical Education and Skills Development Authority (TESDA)", "period": "2010-2013"}
    ],
    "lawsAuthored": [
      {"lawName": "Go Negosyo Act (RA 10644)", "description": "Provided for the establishment of Negosyo Centers to support micro, small, and medium enterprises (MSMEs).", "status": "Principal Sponsor, Passed"},
      {"lawName": "Free Higher Education Act (RA 10931)", "description": "Provided free tuition and other fees in state universities and colleges (SUCs), local universities and colleges (LUCs), and state-run technical-vocational institutions.", "status": "Co-authored, Passed"}
    ],
    "contributions": [
      "Championed legislation supporting MSMEs, youth, and education.",
      "Advocated for affordable internet access.",
      "Involved in various social enterprises before entering politics."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Known for his focus on poverty alleviation and economic empowerment. Part of the prominent Aquino political family."
  },
  {
    "id": 8,
    "name": "Abigail Binay",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Abigail+Binay",
    "party": "NPC (Nationalist People's Coalition)",
    "shortBio": "Incumbent Mayor of Makati City. Previously served as a Representative of Makati. Daughter of former Vice President Jejomar Binay and sister of former Senator Nancy Binay.",
    "education": [
      {"degree": "Bachelor of Science in Human Ecology, Major in Architecture and the Built Environment", "school": "University of the Philippines Los Baños", "year": "1997"},
       {"degree": "Bachelor of Laws", "school": "Ateneo de Manila University", "year": "2001"}
    ],
    "workBackground": [
      {"position": "Mayor", "company": "Makati City", "period": "2016-Present"},
      {"position": "Representative", "company": "Makati City (2nd District)", "period": "2007-2016"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A (Focus as Mayor is on local ordinances and programs)", "description": "As a former Representative, contributed to national legislation, but focus has been on local governance as Mayor.", "status": "N/A"}
    ],
    "contributions": [
      "Implemented various programs in Makati focusing on healthcare, education, and social welfare.",
      "Oversaw the city's response to the COVID-19 pandemic.",
      "Focused on improving local infrastructure and services."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Part of the prominent Binay political family. Known for her leadership in Makati City."
  },
  {
    "id": 9,
    "name": "Francis Pangilinan",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Francis+Pangilinan",
    "party": "Liberal Party",
    "shortBio": "Former Senator and Senate Majority Leader. A lawyer and advocate for agriculture and rural development. Served as Presidential Assistant for Food Security and Agricultural Modernization.",
    "education": [
      {"degree": "Bachelor of Arts in English, Major in Comparative Literature", "school": "University of the Philippines, Diliman", "year": "1986"},
      {"degree": "Bachelor of Laws", "school": "University of the Philippines, Diliman", "year": "1991"},
      {"degree": "Master of Public Administration", "school": "Harvard University Kennedy School of Government", "year": "1998"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2001-2013, 2016-2022"},
      {"position": "Presidential Assistant for Food Security and Agricultural Modernization", "company": "Office of the President", "period": "2014-2015"}
    ],
    "lawsAuthored": [
      {"lawName": "Juvenile Justice and Welfare Act (RA 9344, as amended)", "description": "Established a comprehensive juvenile justice and welfare system.", "status": "Principal Author, Passed"},
      {"lawName": "Food Safety Act (RA 10611)", "description": "Strengthened the food safety regulatory system in the country.", "status": "Principal Sponsor, Passed"},
      {"lawName": "Sagip Saka Act (RA 11321)", "description": "Provided for the comprehensive program to support farmers and fisherfolk.", "status": "Principal Author, Passed"}
    ],
    "contributions": [
      "Championed legislation for agriculture, food security, and youth welfare.",
      "Advocated for good governance and anti-corruption measures.",
      "Supported programs for farmers and fisherfolk."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Known as 'Kiko'. Strong advocate for the agricultural sector. Ran for Vice President in 2022."
  },
  {
    "id": 10,
    "name": "Manny Pacquiao",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Manny+Pacquiao",
    "party": "PFP (Partido Federal ng Pilipinas)",
    "shortBio": "Former Senator and world-renowned professional boxer. Also served as a Representative of Sarangani.",
    "education": [
       {"degree": "Bachelor of Arts in Political Science", "school": "University of Makati", "year": "2019"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2016-2022"},
      {"position": "Representative", "company": "Sarangani Province (Lone District)", "period": "2010-2016"},
      {"position": "Professional Boxer", "company": "N/A", "period": "Decades of Career"}
    ],
    "lawsAuthored": [
      {"lawName": "Philippine Boxing and Other Combat Sports Act (RA 10690)", "description": "Strengthened the regulatory framework for boxing and other combat sports.", "status": "Principal Author, Passed"},
       {"lawName": "National Bible Day Act (RA 11163)", "description": "Declared the last Monday of January as National Bible Day.", "status": "Principal Author, Passed"}
    ],
    "contributions": [
      "Brought international recognition to the Philippines through his boxing career.",
      "Authored legislation related to sports development and religious freedom.",
      "Known for providing assistance to his constituents."
    ],
    "issuesOrViolations": [
        {"case": "Tax Evasion Case", "status": "Settled or Ongoing (information varies)", "details": "Faced legal issues regarding alleged unpaid taxes from boxing earnings. Status of the case has varied over time."}
        ],
    "otherKeyAspects": "One of the most popular and recognizable Filipinos globally. His political career has been intertwined with his sports career."
  },
    {
    "id": 11,
    "name": "Willie Revillame",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Willie+Revillame",
    "party": "Independent",
    "shortBio": "Popular television host, comedian, and recording artist. Known for his variety and game shows that often provide prizes and assistance to contestants.",
    "education": [
      {"degree": "Unspecified", "school": "Unspecified", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Television Host", "company": "Various Media Networks", "period": "Decades of Career"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A", "description": "Has no prior legislative experience.", "status": "N/A"}
    ],
    "contributions": [
      "Provided entertainment and financial assistance to many Filipinos through his shows.",
      "Known for his philanthropic activities and charitable donations."
    ],
    "issuesOrViolations": [
        {"case": "Various controversies related to his TV shows", "status": "Addressed or Resolved", "details": "Has faced controversies regarding the treatment of contestants and incidents on his shows, which have been addressed by relevant authorities or networks."}
        ],
    "otherKeyAspects": "Strong name recall and popularity due to his media career. Often associated with providing aid to the poor."
  },
   {
    "id": 12,
    "name": "Ben Tulfo",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Ben+Tulfo",
    "party": "Independent",
    "shortBio": "Broadcast journalist and television personality. Known for his hard-hitting commentary on public issues.",
    "education": [
      {"degree": "Unspecified", "school": "Unspecified", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Broadcast Journalist/Commentator", "company": "Various Media Networks", "period": "Decades of Service"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A", "description": "Has no prior legislative experience.", "status": "N/A"}
    ],
    "contributions": [
      "Provided a platform for public grievances and concerns through his programs.",
      "Known for his strong stance against crime and corruption."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Part of the Tulfo media family. Popular for his straightforward and often controversial commentary."
  },
   {
    "id": 13,
    "name": "Camille Villar",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Camille+Villar",
    "party": "Nacionalista Party",
    "shortBio": "Incumbent Representative of Las Piñas and daughter of real estate magnate and former Senator Manny Villar and Senator Cynthia Villar.",
    "education": [
      {"degree": "Bachelor of Science in Management", "school": "University of Pennsylvania Wharton School", "year": "2008"}
    ],
    "workBackground": [
      {"position": "Representative", "company": "Las Piñas City (Lone District)", "period": "2019-Present"},
      {"position": "Businesswoman", "company": "Various Villar-owned companies", "period": "Prior to politics"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A (Focus as Representative is on district concerns and national legislation)", "description": "Contributed to national legislation as a Representative. Specific authored laws for inclusion in a Senate bid are not always summarized publicly.", "status": "N/A"}
    ],
    "contributions": [
      "Focused on initiatives for her constituents in Las Piñas.",
      "Involved in legislative work in the House of Representatives.",
      "Comes from a background in business."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Part of the prominent Villar political and business family. Gaining political prominence."
  },
    {
    "id": 14,
    "name": "Vicente Sotto III",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Tito+Sotto",
    "party": "NPC (Nationalist People's Coalition)",
    "shortBio": "Former Senate President, Senator, Vice Mayor of Quezon City, and a prominent television personality. Has a long career in both entertainment and politics.",
    "education": [
      {"degree": "Bachelor of Arts in English", "school": "Araneta University", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Senate President", "company": "Senate of the Philippines", "period": "2018-2022"},
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "1992-2004, 2016-2022"},
      {"position": "Vice Mayor", "company": "Quezon City", "period": "1988-1992"},
      {"position": "Television Personality/Host", "company": "Various Media Networks", "period": "Decades of Career"}
    ],
    "lawsAuthored": [
      {"lawName": "Dangerous Drugs Act of 2002 (RA 9165)", "description": "Comprehensive law on illegal drugs.", "status": "Principal Sponsor/Author, Passed"},
      {"lawName": "Family Courts Act of 1997 (RA 8369)", "description": "Established Family Courts.", "status": "Principal Sponsor/Author, Passed"},
      {"lawName": "Anti-Cybercrime Act of 2012 (RA 10175)", "description": "Addressed cybercrime offenses.", "status": "Authored/Sponsored, Passed"}
    ],
    "contributions": [
      "Authored and sponsored significant legislation on public safety, justice, and family welfare.",
      "Presided over the Senate as Senate President.",
      "Known for his anti-drug advocacy."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Veteran legislator and popular media figure. Ran for Vice President in 2022."
  },
    {
    "id": 15,
    "name": "Panfilo Lacson",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Ping+Lacson",
    "party": "Independent",
    "shortBio": "Former Senator, Philippine National Police (PNP) Chief, and Presidential aspirant. Known for his stance against corruption and crime.",
    "education": [
      {"degree": "Bachelor of Science", "school": "Philippine Military Academy (PMA)", "year": "1971"},
      {"degree": "Master in National Security Administration", "school": "National Defense College of the Philippines", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "2001-2013, 2016-2022"},
      {"position": "Director General", "company": "Philippine National Police (PNP)", "period": "1999-2001"}
    ],
    "lawsAuthored": [
      {"lawName": "Anti-Terrorism Act of 2020 (RA 11479)", "description": "Strengthened the anti-terrorism law.", "status": "Principal Author/Sponsor, Passed"},
      {"lawName": "Rationalized Retirement and Separation Benefits of the PNP (RA 8551)", "description": "Reformed the PNP retirement system.", "status": "Authored, Passed"},
      {"lawName": "Seat Belts Use Act (RA 8750)", "description": "Mandated the use of seat belts.", "status": "Authored, Passed"}
    ],
    "contributions": [
      "Authored and sponsored key legislation on national security, law enforcement, and public safety.",
      "Advocated for budget reform and anti-pork barrel measures.",
      "Known for his strict stance on discipline and accountability."
    ],
    "issuesOrViolations": [
         {"case": "Doble Cara' murder case", "status": "Acquitted", "details": "Was implicated in the Dacer-Corbito double murder case but was eventually acquitted by the Supreme Court."}
        ],
    "otherKeyAspects": "Experienced legislator and former top law enforcement official. Focused on security, peace and order, and good governance."
  },
   {
    "id": 16,
    "name": "Gregorio Honasan",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Gringo+Honasan",
    "party": "Reform PH Party",
    "shortBio": "Former Senator and military officer. Known for his involvement in coup attempts during the Cory Aquino administration. Served as Secretary of Information and Communications Technology.",
    "education": [
      {"degree": "Bachelor of Science", "school": "Philippine Military Academy (PMA)", "year": "1971"}
    ],
    "workBackground": [
      {"position": "Secretary", "company": "Department of Information and Communications Technology (DICT)", "period": "2019-2021"},
      {"position": "Senator of the Philippines", "company": "Senate of the Philippines", "period": "1995-2004, 2007-2019"},
      {"position": "Philippine Army Officer", "company": "Armed Forces of the Philippines", "period": "Prior to politics"}
    ],
    "lawsAuthored": [
      {"lawName": "Clean Air Act (RA 8749)", "description": "Comprehensive air pollution control policy.", "status": "Principal Sponsor, Passed"},
      {"lawName": "Clean Water Act (RA 9275)", "description": "Comprehensive water quality management policy.", "status": "Principal Sponsor, Passed"},
       {"lawName": "Climate Change Act (RA 9729)", "description": "Established the framework for climate change adaptation and mitigation.", "status": "Authored, Passed"}
    ],
    "contributions": [
      "Authored and sponsored key environmental laws.",
      "Advocated for national security and peace initiatives.",
      "Involved in legislative oversight on defense and security matters."
    ],
    "issuesOrViolations": [
        {"case": "Involvement in coup attempts", "status": "Amnestied", "details": "Participated in several coup attempts against the government in the late 1980s. Was granted amnesty."}
    ],
    "otherKeyAspects": "Transitioned from military figure to legislator. Focuses on environment, national security, and good governance."
  },
    {
    "id": 17,
    "name": "Norberto Gonzales",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Norberto+Gonzales",
    "party": "PDSP (Partido Demokratiko Sosyalista ng Pilipinas)",
    "shortBio": "Former Secretary of National Defense and National Security Adviser. Long-time political figure and chairman of a political party.",
    "education": [
      {"degree": "Unspecified", "school": "Unspecified", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Secretary", "company": "Department of National Defense", "period": "2007-2010"},
      {"position": "National Security Adviser", "company": "National Security Council", "period": "Unspecified Period"},
      {"position": "Chairman", "company": "Partido Demokratiko Sosyalista ng Pilipinas (PDSP)", "period": "Long-standing"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A", "description": "Primarily served in executive positions, not a legislator.", "status": "N/A"}
    ],
    "contributions": [
      "Involved in national security and defense policy-making.",
      "Played a role in peace negotiations.",
      "Heads a political party with a social democratic platform."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Experienced in national security and political strategy. Offers a distinct political perspective."
  },
   {
    "id": 18,
    "name": "Rodante Marcoleta",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Rodante+Marcoleta",
    "party": "SAGIP Partylist (running as independent or under an alliance for Senate)",
    "shortBio": "Incumbent Party-list Representative known for his strong stance on various national issues and interpellation skills in the House of Representatives.",
    "education": [
      {"degree": "Bachelor of Laws", "school": "San Sebastian College - Recoletos", "year": "1987"}
    ],
    "workBackground": [
      {"position": "Party-list Representative", "company": "SAGIP Partylist", "period": "2016-Present"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A (as Party-list Representative, focus is often on specific sector advocacy)", "description": "Contributed to national legislation as a Representative. Information on specific laws primarily authored for a Senate bid is not always summarized publicly.", "status": "N/A"}
    ],
    "contributions": [
      "Known for his active participation in legislative inquiries and debates.",
      "Advocates for accountability in government.",
      "Represents the interests of the SAGIP Partylist."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Recognized for his strong opinions and questioning during legislative hearings."
  },
   {
    "id": 19,
    "name": "Teodoro Casiño",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Teddy+Casiño",
    "party": "Makabayan",
    "shortBio": "Former Party-list Representative for Bayan Muna. A long-time activist and advocate for marginalized sectors and human rights.",
    "education": [
      {"degree": "Bachelor of Science in Sociology", "school": "University of the Philippines Los Baños", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Party-list Representative", "company": "Bayan Muna Partylist", "period": "2004-2013"}
    ],
    "lawsAuthored": [
      {"lawName": "Human Rights Victims Reparation and Recognition Act (RA 10368)", "description": "Provided for reparation and recognition of victims of human rights violations during the Marcos regime.", "status": "Authored/Co-authored, Passed"},
      {"lawName": "Anti-Torture Act (RA 9745)", "description": "Criminalized torture and established penalties.", "status": "Authored/Co-authored, Passed"}
    ],
    "contributions": [
      "Championed legislation on human rights, labor, and social justice.",
      "Actively involved in advocating for the rights of peasants, workers, and the urban poor.",
      "Participated in oversight and investigation of government actions."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Prominent figure in progressive politics. Advocates for systemic change and accountability."
  },
    {
    "id": 20,
    "name": "France Castro",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=France+Castro",
    "party": "Makabayan",
    "shortBio": "Incumbent Party-list Representative for ACT Teachers. An educator and advocate for teachers' rights and education reforms.",
    "education": [
      {"degree": "Bachelor's Degree in Education", "school": "Unspecified", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Party-list Representative", "company": "ACT Teachers Partylist", "period": "2016-Present"},
      {"position": "Educator/Teacher", "company": "Various Institutions", "period": "Prior to politics"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A (as Party-list Representative, focus is often on specific sector advocacy)", "description": "Contributed to national legislation as a Representative, particularly on education and labor issues. Specific authored laws for a Senate bid are not always summarized publicly.", "status": "N/A"}
    ],
    "contributions": [
      "Championed the rights and welfare of teachers and education support personnel.",
      "Advocated for increased budget for education.",
      "Involved in legislative oversight on education policies."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Strong advocate for the education sector and workers' rights. Part of the Makabayan bloc."
  },
    {
    "id": 21,
    "name": "Arlene Brosas",
    "photo": "https://placehold.co/300x300/E0E0E0/757575?text=Arlene+Brosas",
    "party": "Makabayan",
    "shortBio": "Incumbent Party-list Representative for GABRIELA. A women's rights advocate and activist.",
    "education": [
      {"degree": "Bachelor's Degree in Architecture", "school": "University of the Philippines, Diliman", "year": "Unspecified"}
    ],
    "workBackground": [
      {"position": "Party-list Representative", "company": "GABRIELA Partylist", "period": "2016-Present"},
      {"position": "Women's Rights Advocate/Activist", "company": "GABRIELA", "period": "Long-standing"}
    ],
    "lawsAuthored": [
      {"lawName": "N/A (as Party-list Representative, focus is often on specific sector advocacy)", "description": "Contributed to national legislation as a Representative, particularly on women's issues and human rights. Specific authored laws for a Senate bid are not always summarized publicly.", "status": "N/A"}
    ],
    "contributions": [
      "Championed legislation and policies for women's rights and gender equality.",
      "Advocated against violence against women and children.",
      "Involved in legislative oversight on gender-related issues."
    ],
    "issuesOrViolations": [],
    "otherKeyAspects": "Leading voice for women's rights and marginalized sectors. Part of the Makabayan bloc."
  }
];

        const candidateGrid = document.getElementById('candidateGrid');
        const searchInput = document.getElementById('searchInput');
        const selectedCountDisplay = document.getElementById('selectedCount');
        const noResultsMessage = document.getElementById('noResultsMessage');
        const noSelectionsMessage = document.getElementById('noSelectionsMessage');

        const modal = document.getElementById('candidateModal');
        const closeModalButton = document.getElementById('closeModalButton');
        const modalCandidateNameTitle = document.getElementById('modalCandidateNameTitle');
        const modalCandidatePhoto = document.getElementById('modalCandidatePhoto');
        const modalCandidateName = document.getElementById('modalCandidateName');
        const modalCandidateParty = document.getElementById('modalCandidateParty');
        const modalShortBio = document.getElementById('modalShortBio');
        const modalEducation = document.getElementById('modalEducation');
        const modalWorkBackground = document.getElementById('modalWorkBackground');
        const modalLawsAuthored = document.getElementById('modalLawsAuthored');
        const modalContributions = document.getElementById('modalContributions');
        const modalIssuesOrViolations = document.getElementById('modalIssuesOrViolations');
        const modalOtherKeyAspectsContainer = document.getElementById('modalOtherKeyAspectsContainer');
        const modalOtherKeyAspects = document.getElementById('modalOtherKeyAspects');
        const modalSelectButton = document.getElementById('modalSelectButton');

        const allCandidatesTab = document.getElementById('allCandidatesTab');
        const mySenatorsTab = document.getElementById('mySenatorsTab');

        let selectedSenators = JSON.parse(localStorage.getItem('selectedSenators')) || [];
        let currentFilter = 'all'; // 'all' or 'selected'
        let currentCandidateIdInModal = null;

        // Function to show non-blocking notifications
        function showNotification(message, type = 'error', duration = 3000) {
            const notificationArea = document.body; // Or a dedicated notification container
            const notification = document.createElement('div');
            notification.className = `notification ${type}`; // 'error' or 'success'
            notification.textContent = message;
            
            notificationArea.appendChild(notification);

            // Trigger the animation
            setTimeout(() => {
                notification.classList.add('show');
            }, 10); // Small delay to allow CSS transition

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300); // Allow fade out animation to complete
            }, duration);
        }


        function updateSelectedCount() {
            selectedCountDisplay.textContent = selectedSenators.length;
            if (currentCandidateIdInModal !== null) {
                const isSelected = selectedSenators.includes(currentCandidateIdInModal);
                modalSelectButton.textContent = isSelected ? 'Remove from My Senators' : 'Add to My Senators';
                modalSelectButton.classList.toggle('bg-red-600', isSelected);
                modalSelectButton.classList.toggle('hover:bg-red-700', isSelected);
                modalSelectButton.classList.toggle('bg-indigo-600', !isSelected);
                modalSelectButton.classList.toggle('hover:bg-indigo-700', !isSelected);
            }
        }

        function saveSelectedSenators() {
            localStorage.setItem('selectedSenators', JSON.stringify(selectedSenators));
        }

        function renderCandidates(filter = '', tab = 'all') {
            candidateGrid.innerHTML = '';
            noResultsMessage.classList.add('hidden');
            noSelectionsMessage.classList.add('hidden');

            let candidatesToDisplay = candidatesData;

            if (tab === 'selected') {
                candidatesToDisplay = candidatesData.filter(c => selectedSenators.includes(c.id));
                if (candidatesToDisplay.length === 0) {
                    noSelectionsMessage.classList.remove('hidden');
                    return;
                }
            }
            
            const searchTerm = filter.toLowerCase().trim();
            if (searchTerm) {
                 candidatesToDisplay = candidatesToDisplay.filter(candidate => 
                    candidate.name.toLowerCase().includes(searchTerm) ||
                    candidate.party.toLowerCase().includes(searchTerm) ||
                    candidate.shortBio.toLowerCase().includes(searchTerm)
                );
            }

            if (candidatesToDisplay.length === 0 && tab === 'all' && !searchTerm) {
                 // This case should ideally not happen if candidatesData is populated
                candidateGrid.innerHTML = '<p class="text-center text-gray-400 col-span-full">No candidate data available.</p>';
                return;
            } else if (candidatesToDisplay.length === 0) {
                noResultsMessage.classList.remove('hidden');
                return;
            }
            
            candidatesToDisplay.forEach(candidate => {
                const card = document.createElement('div');
                // Added 'group' for hover effect on child button and 'relative' for positioning
                card.className = `candidate-card relative group bg-gray-800 rounded-lg shadow-lg p-5 cursor-pointer flex flex-col items-center text-center ${selectedSenators.includes(candidate.id) ? 'selected' : ''}`;
                card.dataset.id = candidate.id;

                const image = document.createElement('img');
                image.src = candidate.photo;
                image.alt = candidate.name;
                image.className = 'w-32 h-32 object-cover rounded-full mb-4 border-2 border-gray-700';
                
                const name = document.createElement('h3');
                name.className = 'text-xl font-semibold text-white mb-1';
                name.textContent = candidate.name;

                const party = document.createElement('p');
                party.className = 'text-sm text-indigo-400';
                party.textContent = candidate.party;

                // Direct Add/Remove Button
                const directAddButton = document.createElement('button');
                directAddButton.className = 'absolute top-3 right-3 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 focus:opacity-100 transition-all duration-200 z-10';
                directAddButton.setAttribute('aria-label', 'Add or remove candidate');

                const updateDirectAddButtonState = () => {
                    if (selectedSenators.includes(candidate.id)) {
                        directAddButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>`; // Check icon
                        directAddButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                        directAddButton.classList.add('bg-green-500', 'hover:bg-green-600');
                    } else {
                        directAddButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>`; // Plus icon
                        directAddButton.classList.remove('bg-green-500', 'hover:bg-green-600');
                        directAddButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                    }
                };
                updateDirectAddButtonState(); // Set initial state

                directAddButton.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent card click (modal opening)
                    const candidateId = candidate.id;
                    const index = selectedSenators.indexOf(candidateId);

                    if (index > -1) { // Already selected, so remove
                        selectedSenators.splice(index, 1);
                        showNotification(`${candidate.name} removed from your senators.`, 'success');
                    } else { // Not selected, so add if not exceeding limit
                        if (selectedSenators.length < 12) {
                            selectedSenators.push(candidateId);
                            showNotification(`${candidate.name} added to your senators.`, 'success');
                        } else {
                            showNotification('You can only select up to 12 senators.', 'error');
                            return;
                        }
                    }
                    saveSelectedSenators();
                    updateSelectedCount();
                    updateDirectAddButtonState(); // Update this button's icon/color
                    card.classList.toggle('selected', selectedSenators.includes(candidateId));

                    if (currentFilter === 'selected' && index > -1) { // If on "My Senators" and one was removed
                        renderCandidates(searchInput.value, currentFilter);
                    }
                    if (currentCandidateIdInModal === candidateId) { // If modal is open for this candidate
                        updateSelectedCount(); // This will also update the modal button
                    }
                });

                card.appendChild(directAddButton);
                card.appendChild(image);
                card.appendChild(name);
                card.appendChild(party);

                card.addEventListener('click', () => openModal(candidate.id));
                candidateGrid.appendChild(card);
            });
        }

        function populateModal(candidate) {
            currentCandidateIdInModal = candidate.id;
            modalCandidateNameTitle.textContent = candidate.name;
            modalCandidatePhoto.src = candidate.photo;
            modalCandidatePhoto.alt = candidate.name;
            modalCandidateName.textContent = candidate.name;
            modalCandidateParty.textContent = candidate.party;
            modalShortBio.textContent = candidate.shortBio;

            const populateList = (element, items, formatter) => {
                element.innerHTML = '';
                if (items && items.length > 0) {
                    items.forEach(item => {
                        const li = document.createElement('li');
                        li.innerHTML = formatter(item);
                        element.appendChild(li);
                    });
                } else {
                    element.innerHTML = '<li>No information available.</li>';
                }
            };

            populateList(modalEducation, candidate.education, item => `<strong>${item.degree}</strong> - ${item.school} (${item.year})`);
            populateList(modalWorkBackground, candidate.workBackground, item => `<strong>${item.position}</strong> at ${item.company} (${item.period})`);
            populateList(modalLawsAuthored, candidate.lawsAuthored, item => `<strong>${item.lawName}</strong> (${item.status}): ${item.description}`);
            populateList(modalContributions, candidate.contributions, item => item);
            populateList(modalIssuesOrViolations, candidate.issuesOrViolations, item => `<strong>${item.case}</strong> (Status: ${item.status})${item.details ? ` - ${item.details}` : ''}`);
            
            if (candidate.otherKeyAspects && candidate.otherKeyAspects.trim() !== "") {
                modalOtherKeyAspects.textContent = candidate.otherKeyAspects;
                modalOtherKeyAspectsContainer.classList.remove('hidden');
            } else {
                modalOtherKeyAspectsContainer.classList.add('hidden');
            }
            updateSelectedCount();
        }

        function openModal(candidateId) {
            const candidate = candidatesData.find(c => c.id === candidateId);
            if (candidate) {
                populateModal(candidate);
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal() {
            modal.classList.add('hidden');
            currentCandidateIdInModal = null;
            document.body.style.overflow = 'auto';
        }

        // Event Listeners
        searchInput.addEventListener('input', (e) => {
            renderCandidates(e.target.value, currentFilter);
        });

        closeModalButton.addEventListener('click', closeModal);
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                closeModal();
            }
        });
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        modalSelectButton.addEventListener('click', () => {
            if (currentCandidateIdInModal === null) return;

            const candidateId = currentCandidateIdInModal;
            const candidate = candidatesData.find(c => c.id === candidateId);
            if (!candidate) return;

            const index = selectedSenators.indexOf(candidateId);

            if (index > -1) {
                selectedSenators.splice(index, 1);
                showNotification(`${candidate.name} removed from your senators.`, 'success');
            } else {
                if (selectedSenators.length < 12) {
                    selectedSenators.push(candidateId);
                    showNotification(`${candidate.name} added to your senators.`, 'success');
                } else {
                    showNotification('You can only select up to 12 senators.', 'error');
                    return; 
                }
            }
            saveSelectedSenators();
            updateSelectedCount(); // This updates modal button and count display
            
            // Update the corresponding card in the grid
            const cardInGrid = candidateGrid.querySelector(`.candidate-card[data-id='${candidateId}']`);
            if (cardInGrid) {
                cardInGrid.classList.toggle('selected', selectedSenators.includes(candidateId));
                const directAddButton = cardInGrid.querySelector('button[aria-label="Add or remove candidate"]');
                if (directAddButton) {
                    // Manually trigger an update for its state if it exists
                    // This is a bit of a workaround; ideally, the button's state is self-contained or refreshed by renderCandidates.
                    // For simplicity, we'll rely on renderCandidates to refresh it if the view changes.
                    // However, if the view doesn't change (e.g. on "All Candidates" tab), we update it here.
                     if (selectedSenators.includes(candidate.id)) {
                        directAddButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>`;
                        directAddButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                        directAddButton.classList.add('bg-green-500', 'hover:bg-green-600');
                    } else {
                        directAddButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>`;
                        directAddButton.classList.remove('bg-green-500', 'hover:bg-green-600');
                        directAddButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                    }
                }
            }
            // If on "My Senators" tab and a senator is removed via modal, re-render
            if (currentFilter === 'selected' && index > -1) {
                renderCandidates(searchInput.value, currentFilter);
            }
        });

        allCandidatesTab.addEventListener('click', () => {
            currentFilter = 'all';
            allCandidatesTab.classList.add('active');
            mySenatorsTab.classList.remove('active');
            renderCandidates(searchInput.value, currentFilter);
        });

        mySenatorsTab.addEventListener('click', () => {
            currentFilter = 'selected';
            mySenatorsTab.classList.add('active');
            allCandidatesTab.classList.remove('active');
            renderCandidates(searchInput.value, currentFilter);
        });

        // Initial Load
        updateSelectedCount();
        renderCandidates('', currentFilter);
    </script>
</body>
</html>
